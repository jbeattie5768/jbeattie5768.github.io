<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Modernizing Python Development: Linting and Formatting with Ruff | Jonathan B</title>
<meta name="keywords" content="Python, Tools, Ruff">
<meta name="description" content="

Introduction
What are Linters and Formatters

Linters
Formatters
Why You Should Use Them


What is Ruff?
Getting Started with Ruff

Installation steps
Basic CLI Usage

ruff check --output-format concise .\example.py
ruff format .\example.py


Configuration

Rules


Integrating Ruff into your workflow

CLI
IDE
Pre-Commit
GitHub Action




Tips
Conclusion
Further Reading


Introduction
Python development is evolving—today, code quality and consistency are more important than ever. Strict is the new cool.
Tools like Black have made opinionated formatting mainstream, and the need for readable, maintainable, and error-free code is greater than ever—especially as projects grow and AI-driven code/tools become more prevalent.">
<meta name="author" content="Jonathan B">
<link rel="canonical" href="http://localhost:1313/posts/2025-07-18-using-ruff-to-improve-python-development/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/2025-07-18-using-ruff-to-improve-python-development/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Jonathan B (Alt + H)">Jonathan B</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Modernizing Python Development: Linting and Formatting with Ruff
    </h1>
    <div class="post-meta"><span title='2025-07-18 00:00:00 +0000 UTC'>July 18, 2025</span>&nbsp;·&nbsp;Jonathan B

</div>
  </header> 
  <div class="post-content"><p><a href="https://github.com/astral-sh/ruff"><img alt="Ruff" loading="lazy" src="https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json"></a></p>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-are-linters-and-formatters">What are Linters and Formatters</a>
<ul>
<li><a href="#linters">Linters</a></li>
<li><a href="#formatters">Formatters</a></li>
<li><a href="#why-you-should-use-them">Why You Should Use Them</a></li>
</ul>
</li>
<li><a href="#what-is-ruff">What is Ruff?</a></li>
<li><a href="#getting-started-with-ruff">Getting Started with Ruff</a>
<ul>
<li><a href="#installation-steps">Installation steps</a></li>
<li><a href="#basic-cli-usage">Basic CLI Usage</a>
<ul>
<li><a href="#ruff-check---output-format-concise-examplepy"><code>ruff check --output-format concise .\example.py</code></a></li>
<li><a href="#ruff-format-examplepy"><code>ruff format .\example.py</code></a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a>
<ul>
<li><a href="#rules">Rules</a></li>
</ul>
</li>
<li><a href="#integrating-ruff-into-your-workflow">Integrating Ruff into your workflow</a>
<ul>
<li><a href="#cli">CLI</a></li>
<li><a href="#ide">IDE</a></li>
<li><a href="#pre-commit">Pre-Commit</a></li>
<li><a href="#github-action">GitHub Action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#tips">Tips</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#further-reading">Further Reading</a></li>
</ul>
<hr>
<h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>Python development is evolving—today, code quality and consistency are more important than ever. <strong>Strict</strong> is the new <em>cool</em>.</p>
<p>Tools like <a href="https://github.com/psf/black">Black</a> have made opinionated formatting mainstream, and the need for readable, maintainable, and error-free code is greater than ever—especially as projects grow and AI-driven code/tools become more prevalent.</p>
<p>As <a href="https://peps.python.org/pep-0020/">The Zen of Python</a> reminds us, &ldquo;Readability counts&rdquo;. The developer principle <a href="https://retrocomputing.stackexchange.com/questions/15724/who-are-we-quoting-when-we-note-that-code-is-written-once-but-read-many-times">&ldquo;code is written once but read many times&rdquo;</a> is still bandied about. But, maintaining high standards manually can be challenging and time-consuming. That’s where modern linters and formatters come in, helping us catch errors early and keep our codebases clean.</p>
<p>In this post, I’ll share my experience adopting <a href="https://docs.astral.sh/ruff/">Ruff</a>, a fast, mode</p>
<hr>
<h2 id="what-are-linters-and-formatters">What are Linters and Formatters<a hidden class="anchor" aria-hidden="true" href="#what-are-linters-and-formatters">#</a></h2>
<hr>
<h3 id="linters">Linters<a hidden class="anchor" aria-hidden="true" href="#linters">#</a></h3>
<p>Linting is the automatic checking of your code for errors. Code that passes linting will probably run.</p>
<p>Technically, linting is <a href="https://en.wikipedia.org/wiki/Static_program_analysis">Static Analysis</a>, meaning they detect defects without running the code by analysing the syntax. Modern linters will also check for improvements to the code that <strong>may</strong> lead to incorrect results: suggesting more robust or accepted ways to code.</p>
<p>Linters reduce errors and improve the quality of your code and therefore should be enabled in IDE&rsquo;s, where they continuously run in the background. Any CI/CD pipeline or pre-commit process should have linting enabled.</p>
<p>A linter can be thought of as a formatter with syntax rules.</p>
<hr>
<h3 id="formatters">Formatters<a hidden class="anchor" aria-hidden="true" href="#formatters">#</a></h3>
<p>A formatter makes your code <em>pretty</em>, by standardising the appearance of the code. Formatters only change the presentation of the code, not the code functionality.<br>
This makes the code easy to read for you and everyone else, and this becomes more important when working in teams.</p>
<p>Formatters use a set of rules for consistency. There are a number of rules formatters use, the <a href="https://peps.python.org/pep-0008/">PEP 8 – Style Guide for Python Code</a> is one such set of standardised rules, but there are numerous anti-pattern rules followed by different formatter implementations as well.</p>
<p>A formatter is opinionated in what it thinks <em>pretty code</em> is, but usually those opinions can be enabled/disabled/ignored.</p>
<hr>
<h3 id="why-you-should-use-them">Why You Should Use Them<a hidden class="anchor" aria-hidden="true" href="#why-you-should-use-them">#</a></h3>
<p><img alt="XCD 1695" loading="lazy" src="https://imgs.xkcd.com/comics/code_quality_2.png"> <em><a href="https://xkcd.com/1695">https://xkcd.com/1695</a></em></p>
<hr>
<h2 id="what-is-ruff">What is Ruff?<a hidden class="anchor" aria-hidden="true" href="#what-is-ruff">#</a></h2>
<p><a href="https://docs.astral.sh/ruff/">Ruff</a> is a fast, modern Python combined linter and formatter from <a href="https://astral.sh/">Astral</a>, the company that developed UV (see <a href="https://jbeattie5768.github.io/posts/2025-07-27-modernizing-python-development-my-switch-to-uv/">My Switch to UV</a>).</p>
<p>Key features of Ruff:</p>
<ul>
<li>Written in Rust&hellip;.so it&rsquo;s fast</li>
<li>A linter and formatter in one tool</li>
<li>Designed as a compatible replacement for multiple existing linters and formatters</li>
<li>Configurable (enable/disable) rules for linting and formatting</li>
<li>IDE integration</li>
<li>Command Line (CLI) usable</li>
<li>Works for Python &gt;=3.7</li>
</ul>
<p>So Ruff simplifies multiple linters and formatters into a single tool and performs those tasks <strong>fast</strong>. How fast?<br>
Well, this graph from the Ruff website shows the time taken to <em>lint</em> the whole <a href="https://github.com/python/cpython">CPython</a> codebase:</p>
<p><img alt="alt text" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-0.png"> <em>source: <a href="https://docs.astral.sh/ruff">https://docs.astral.sh/ruff</a></em></p>
<p>Taken from an Astral blog post, this graph shows the timings to <em>format</em> the ~250k line <a href="https://github.com/zulip/zulip">Zulip</a> codebase:</p>
<p><img alt="Ruff Formatter Speed Comparison" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-1.png"> <em>source: <a href="https://astral.sh/blog/the-ruff-formatter">https://astral.sh/blog/the-ruff-formatter</a></em></p>
<p>Some of the tools it replaces are:</p>
<ul>
<li>
<p><a href="https://github.com/PyCQA/flake8">flake8</a> <em>+ dozens of plugins</em></p>
</li>
<li>
<p><a href="https://github.com/pylint-dev/pylint">pylint</a></p>
</li>
<li>
<p><a href="https://github.com/asottile/pyupgrade">pyupgrade</a></p>
</li>
<li>
<p><a href="https://github.com/PyCQA/autoflake">autoflake</a></p>
</li>
<li>
<p><a href="https://github.com/dosisod/refurb">refurb</a></p>
</li>
<li>
<p><a href="https://github.com/tonybaloney/perflint">perflint</a></p>
</li>
<li>
<p><a href="https://github.com/psf/black">black</a></p>
</li>
<li>
<p><a href="https://github.com/PyCQA/isort">isort</a></p>
</li>
<li>
<p><a href="https://github.com/PyCQA/pydocstyle">pydocstyle</a></p>
</li>
<li>
<p><a href="https://github.com/jsh9/pydoclint">pydoclint</a></p>
</li>
<li>
<p><a href="https://github.com/guilatrova/tryceratops">tryceratops</a></p>
</li>
</ul>
<hr>
<h2 id="getting-started-with-ruff">Getting Started with Ruff<a hidden class="anchor" aria-hidden="true" href="#getting-started-with-ruff">#</a></h2>
<hr>
<h3 id="installation-steps">Installation steps<a hidden class="anchor" aria-hidden="true" href="#installation-steps">#</a></h3>
<p>Being an Astral tool, there are multiple methods of installing Ruff.<br>
For me, I want to install Ruff as a system tool, so it is globally available to me all the time. I have UV installed, so I will install using that:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>uv tool install ruff
</span></span></code></pre></div><p><img alt="alt text" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/2025-07-18-uv-ruff-01.jpg"></p>
<p>If you do not have UV installed (I recommend you do, see <a href="https://jbeattie5768.github.io/posts/2025-07-27-modernizing-python-development-my-switch-to-uv/">My Switch to UV</a>), you can install directly with PowerShell:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>powershell -c <span style="color:#e6db74">&#34;irm https://astral.sh/ruff/install.ps1 | iex&#34;</span>
</span></span></code></pre></div><p>Alternatively you can add it to your project tools as part of your Venv, or be a caveman and use other outdated install methods, e.g., PiP, PiPx:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>uv add --dev ruff  <span style="color:#75715e"># Install into project Development</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pip install ruff   <span style="color:#75715e"># Use one of the outdated install method </span>
</span></span></code></pre></div><p>See the <a href="https://docs.astral.sh/ruff/installation/">Ruff Install Documentation</a> if your preferred install method is not mentioned here.</p>
<hr>
<h3 id="basic-cli-usage">Basic CLI Usage<a hidden class="anchor" aria-hidden="true" href="#basic-cli-usage">#</a></h3>
<p>Once installed, you can run Ruff on the CLI:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff check           <span style="color:#75715e"># Recursively lint all files, from this working directory</span>
</span></span><span style="display:flex;"><span>ruff check .         <span style="color:#75715e"># Recursively lint all files, from this working directory</span>
</span></span><span style="display:flex;"><span>ruff check test.py   <span style="color:#75715e"># Lint specific file only </span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>ruff check *.py      <span style="color:#75715e"># Lint all Python files in the current directory</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ruff format          <span style="color:#75715e"># Recursively format all files, from this working directory</span>
</span></span><span style="display:flex;"><span>ruff format .        <span style="color:#75715e"># Recursively format all files, from this working directory</span>
</span></span><span style="display:flex;"><span>ruff format test.py  <span style="color:#75715e"># Format specific file only</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>ruff format *.py     <span style="color:#75715e"># Format all Python files in the current directory</span>
</span></span></code></pre></div><p>The same is true if you did not install Ruff, but want to run the tool from within a UV cached environment via <a href="https://docs.astral.sh/uv/concepts/tools/#execution-vs-installation">UVX</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># uvx is an alias for uv tool run</span>
</span></span><span style="display:flex;"><span>uvx ruff check       <span style="color:#75715e"># Recursively lint all files, from this working directory</span>
</span></span><span style="display:flex;"><span>uvx ruff format      <span style="color:#75715e"># Recursively format all files, from this working directory</span>
</span></span></code></pre></div><hr>
<p>That&rsquo;s all there is to it, two simple commands to lint and format.<br>
The results of running either command are the important thing. As an example, lets take this, highly contrived, simple Python file that has syntax errors and formatting issues:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#f92672">from</span> sys <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#f92672">import</span> os<span style="color:#f92672">,</span> math
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>num_strs <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Zero&#34;</span>: <span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#34;One&#34;</span>:<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;Two&#34;</span>: <span style="color:#ae81ff">2</span> , <span style="color:#e6db74">&#34;Three&#34;</span>: <span style="color:#ae81ff">3</span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>str_nums <span style="color:#f92672">=</span> {<span style="color:#ae81ff">0</span>: <span style="color:#e6db74">&#34;Zero&#34;</span> ,<span style="color:#ae81ff">1</span>:<span style="color:#e6db74">&#34;One&#34;</span>,  <span style="color:#ae81ff">2</span>:<span style="color:#e6db74">&#34;Two&#34;</span> , <span style="color:#ae81ff">3</span>: <span style="color:#e6db74">&#34;Three&#34;</span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">TranslateNumberString</span>(numberstring
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#e6db74">    Example function
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">True</span>,):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>        <span style="color:#66d9ef">return</span> num_strs[numberstring]
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    pprint(num_strs)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    pprint(str_nums)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>            r <span style="color:#f92672">=</span> TranslateNumberString(str_nums[x])
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>            print(<span style="color:#e6db74">&#39;Str </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> = </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(str_nums[x], r))
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>        <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>            print(<span style="color:#e6db74">&#34;Damn!&#34;</span>)
</span></span></code></pre></div><hr>
<h4 id="ruff-check---output-format-concise-examplepy"><code>ruff check --output-format concise .\example.py</code><a hidden class="anchor" aria-hidden="true" href="#ruff-check---output-format-concise-examplepy">#</a></h4>
<p>So I am linting this file and I&rsquo;ve made the output <em>concise</em> (default is <em>full</em>), and passed i the <code>--isolated</code> flag so Ruff will ignore my config files and use the defaults instead (see <a href="#configuration">Configuration</a>).  I did say this was <em>contrived</em>).</p>
<p><img alt="Ruff Linter Errors (Concise)" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-3.png"></p>
<p>Even from those few lines of rushed code I&rsquo;ve got 8 syntax errors.</p>
<p>The <em>full</em> format explains in more detail each fault found, for example:</p>
<p><code>ruff check .\example.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span><span style="color:#75715e"># Both lines are equivalent</span>
</span></span><span style="display:flex;"><span>ruff check example.py
</span></span><span style="display:flex;"><span>ruff check --output-format full example.py  
</span></span></code></pre></div><p><img alt="Ruff Linter Error (Full)" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-4.png"></p>
<p>The linter cannot always fix detected issues, for the rules the linter can fix see the legend in the <a href="https://docs.astral.sh/ruff/rules/#legend">Ruff Rules Documentation</a>.</p>
<p>In this example there are 4 errors fixable automatically (those with [*]). Lets fix the easy ones automatically as they are simple errors:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff check --diff example.py  <span style="color:#75715e"># Show what the changes &#39;would&#39; be</span>
</span></span><span style="display:flex;"><span>ruff check --fix example.py   <span style="color:#75715e"># Apply the changes</span>
</span></span></code></pre></div><p><img alt="Auto-fix after Checking  the Diff" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-4b.png"></p>
<p>You may get fixes that Ruff has classed as being unsafe, indicating that the <em>meaning</em> of your code <strong>may</strong> change with those fixes. There are none in the example, but the commands to fix the unsafe-fixes are similar:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff check --unsafe-fixes --diff example.py  <span style="color:#75715e"># Show what the changes &#39;would&#39; be</span>
</span></span><span style="display:flex;"><span>ruff check --unsafe-fixes --fix example.py   <span style="color:#75715e"># Apply the changes</span>
</span></span></code></pre></div><p>Now we are down to 4 errors for our example, but there are no auto fixes for those. Lets go read the docs for each errored rule and fix them manually:</p>
<ul>
<li>F403 <code>from sys import *</code> used; unable to detect undefined names
<ul>
<li>Yes, star imports are bad, change to <code>import sys</code></li>
</ul>
</li>
<li>F634 If test is a tuple, which is always <code>True</code>
<ul>
<li>Change to <code>if True:</code></li>
</ul>
</li>
<li>E402 Module level import not at top of file
<ul>
<li>Move import to the top</li>
</ul>
</li>
<li>E722 Do not use bare <code>except</code>
<ul>
<li>Change to <code>except Exception as e:</code></li>
</ul>
</li>
</ul>
<p>Sometimes when you fix an issue, you will get another, in this case I got another <code>F401 'sys' imported but unused</code> error, which I also fixed. You always need to run the linter again until all the errors have been resolved.</p>
<p>A mentioned, errors state what the problem is and give a rule number (e.g., <a href="https://docs.astral.sh/ruff/rules/undefined-local-with-import-star/">F403</a>) that you can look up on the Ruff <a href="https://docs.astral.sh/ruff/rules/">Rules</a> pages to get more information and suggestions on how to fix.</p>
<blockquote class="note"><p>Note: When used within an IDE, hyperlinks are provided to quickly get information on the error.</p></blockquote>
<p>Now we have all checks passing:</p>
<p><img alt="Diff Changes for <code>example.py</code>" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-5.png"></p>
<hr>
<h4 id="ruff-format-examplepy"><code>ruff format .\example.py</code><a hidden class="anchor" aria-hidden="true" href="#ruff-format-examplepy">#</a></h4>
<p>Before we format the remaining code, lets take a look at what would be changed:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff format --diff .\example.py  <span style="color:#75715e"># Show what the changes &#39;would&#39; be</span>
</span></span></code></pre></div><p><img alt="Ruff Format Proposed Changes" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-2.png"></p>
<p>Again I am using the <code>--isolated</code> option to use the default rules only.<br>
Lets accept those changes and let Ruff format the code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff format .\example.py   <span style="color:#75715e"># Apply the formatting changes</span>
</span></span></code></pre></div><p>The final code is now:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>num_strs <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Zero&#34;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;One&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;Two&#34;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;Three&#34;</span>: <span style="color:#ae81ff">3</span>}
</span></span><span style="display:flex;"><span>str_nums <span style="color:#f92672">=</span> {<span style="color:#ae81ff">0</span>: <span style="color:#e6db74">&#34;Zero&#34;</span>, <span style="color:#ae81ff">1</span>: <span style="color:#e6db74">&#34;One&#34;</span>, <span style="color:#ae81ff">2</span>: <span style="color:#e6db74">&#34;Two&#34;</span>, <span style="color:#ae81ff">3</span>: <span style="color:#e6db74">&#34;Three&#34;</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">TranslateNumberString</span>(numberstring):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Example function
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> num_strs[numberstring]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    pprint(num_strs)
</span></span><span style="display:flex;"><span>    pprint(str_nums)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            r <span style="color:#f92672">=</span> TranslateNumberString(str_nums[x])
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Str </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> = </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(str_nums[x], r))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;How exceptional! </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>Although the code runs and does what was intended, there are still <em>issues</em> with this code. Linters and formatters are only there to help you, not replace you!</p>
<hr>
<h3 id="configuration">Configuration<a hidden class="anchor" aria-hidden="true" href="#configuration">#</a></h3>
<p>The rules used by Ruff are derived from multiple linters and formatters, and are configurable through hierarchical TOML files.</p>
<p>Whether Ruff is used as a linter, a formatter or both, configuration follows the same methodology. Ruff will search for a configuration file in one of the following files <code>.ruff.toml</code>, <code>ruff.toml</code> or <code>pyproject.toml</code> in the closest directory and in that order of preference. Alternatively you can specify any TOML file with the <code>--config</code> option.</p>
<p>It is normal to include Ruff configuration in your project <code>pyproject.toml</code> file, as the Ruff configuration can be included in the projects version control.<br>
The majority of projects using Ruff, as <a href="https://github.com/astral-sh/ruff#whos-using-ruff">listed by Astral</a>, use their existing <code>pyproject.toml</code> to store their Ruff configuration. For example:</p>
<p><a href="https://github.com/fastapi/fastapi/blob/master/pyproject.toml">FastApi using <code>pyproject.toml</code></a><br>
<a href="https://github.com/pandas-dev/pandas/blob/main/pyproject.toml">Pandas using <code>pyproject.toml</code></a><br>
<a href="https://github.com/pola-rs/polars/blob/0c4650f1e066e3c02507df8a778f0ff02c352a48/py-polars/pyproject.toml">Polars using <code>pyproject.toml</code></a></p>
<blockquote class="note"><p>As an aside, SCiPy has renamed their Ruff config file <code>lint.toml</code> and explicitly referenced it in calling Ruff with the <code>--config</code> option.<br>
<a href="https://github.com/scipy/scipy/blob/432ce1a23d6a534d5a8845488229c7f2f1b5a100/tools/lint.toml">SciPy <code>lint.toml</code></a><br>
<a href="https://github.com/scipy/scipy/blob/432ce1a23d6a534d5a8845488229c7f2f1b5a100/tools/lint.py#L72-L81">SciPy calling Ruff with the <code>--config</code> option</a></p></blockquote>
<p>There is no reason to not have a separate <code>ruff.toml</code> in your project directory.</p>
<p>That&rsquo;s all well and good, but what if we don&rsquo;t have a project, but still want to check certain files on the command line. We have 4 options:</p>
<ol>
<li>Add a <code>pyproject.toml</code> to the directory</li>
<li>Add a <code>ruff.toml</code> to the directory</li>
<li>Use the <code>--config</code> option and point to an existing <code>ruff.toml</code> located elsewhere</li>
<li>Have a default <em>global</em> <code>ruff.toml</code> that will be used if no other configuration file is located.</li>
</ol>
<p>For me, #4 is the preferred option for the way I work (although I am trying to use <code>pyproject.toml</code> more often, even for <em>sandbox</em> directories). I now have a default <code>ruff.toml</code> in my Windows home directory and a symbolic link to the Ruff directory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span><span style="color:#75715e"># Needs to be run as *PowerShell Admin (only Admin can create links)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use &#39;-Force&#39; in case &#39;\AppData\Roaming\Ruff&#39; dir has not been created</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>New-Item -ItemType SymbolicLink -Force -Path <span style="color:#e6db74">&#34;</span>$env:USERPROFILE<span style="color:#e6db74">\AppData\Roaming\Ruff\ruff.toml&#34;</span> -Target <span style="color:#e6db74">&#34;</span>$env:USERPROFILE<span style="color:#e6db74">\ruff.toml&#34;</span>
</span></span></code></pre></div><p>IMHO, Ruff is a little lacking in not allowing a home directory default/fallback configuration file. Instead it has its <a href="https://docs.astral.sh/ruff/configuration/#config-file-discovery">file discovery</a>, one of which is the <code>${config_dir}/ruff/</code> directory. For Windows, the <code>$(config_dir)</code> is equivalent to <code>%userprofile%\AppData\Roaming</code> and if there is a <code>pyproject.toml</code> or <code>ruff.toml</code> located in the assocuated Ruff directory, that TOML will be used if no local config file is found.</p>
<hr>
<h4 id="rules">Rules<a hidden class="anchor" aria-hidden="true" href="#rules">#</a></h4>
<p>Ruff rules are based around codes, <strong><em>[Letter Prefix][Number Code]</em></strong>, e.g., F841.<br>
The letter prefix indicate groups that are the source of the rule. This becomes more obvious when you look at the online <a href="https://docs.astral.sh/ruff/rules/">Rules Documentation</a>.</p>
<p>Additionally there are <a href="https://docs.astral.sh/ruff/settings/">Settings</a> which work alongside rules and define some rule parameters. For example, <a href="https://docs.astral.sh/ruff/rules/line-too-long/"><code>E501</code></a> is &ldquo;<em>line too long</em>&rdquo; which has a default of 88, but the Setting <code>line-length</code> allows you to define the length after-which this rule will be triggered, e.g.,:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-toml" data-lang="toml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># pyproject.toml</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">ruff</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">line-length</span> = <span style="color:#ae81ff">120</span>  <span style="color:#75715e"># Allow lines to be as long as 120.</span>
</span></span></code></pre></div><hr>
<p>The best way to start with your Ruff config is to add all rules, or the default set of group rules, and remove rules as they annoy you:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-toml" data-lang="toml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># pyproject.toml</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">ruff</span>.<span style="color:#a6e22e">lint</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">select</span> = [<span style="color:#e6db74">&#34;ALL&#34;</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-toml" data-lang="toml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># pyproject.toml</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">ruff</span>.<span style="color:#a6e22e">lint</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># RUFF DEFAULTS</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">select</span> = [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;F&#34;</span>,    <span style="color:#75715e"># pyflakes – detects syntax errors and basic mistakes</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;E4&#34;</span>,   <span style="color:#75715e"># pycodestyle errors (part of E group)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;E7&#34;</span>,   <span style="color:#75715e"># pycodestyle E7xx errors (naming, etc.)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;E9&#34;</span>,   <span style="color:#75715e"># pycodestyle E9xx errors (syntax)</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><hr>
<p>I&rsquo;ve opted to add all rules and remove them as they annoy me. Defining <code>&quot;ALL&quot;</code> will at least mean that if any new rules are implemented, I will not miss the chance for those rules to annoy me.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-toml" data-lang="toml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># ruff.toml</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Settings</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">line-length</span> = <span style="color:#ae81ff">120</span>  <span style="color:#75715e"># Keep aligned with .editorconfig</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">format</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">line-ending</span> = <span style="color:#e6db74">&#34;lf&#34;</span> <span style="color:#75715e"># Use `\n` line endings</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">lint</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">select</span> = [<span style="color:#e6db74">&#34;ALL&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ignore</span> = [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ANN&#34;</span>,    <span style="color:#75715e"># flake8-annotations - MyPy is checking annotations</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;S311&#34;</span>,   <span style="color:#75715e"># flake8-bandit - cryptographically weak `random` used</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;RET504&#34;</span>, <span style="color:#75715e"># flake8-return - unnecessary assignment before `return` statement</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D200&#34;</span>,   <span style="color:#75715e"># pydocstyle - unnecessary multiline docstring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D203&#34;</span>,   <span style="color:#75715e"># pydocstyle - blank line before class docstring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D212&#34;</span>,   <span style="color:#75715e"># pydocstyle - docstring not on 1st line after opening quotes</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D400&#34;</span>,   <span style="color:#75715e"># pydocstyle - missing trailing period in docstring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D401&#34;</span>,   <span style="color:#75715e"># pydocstyle - docstring first lines are not in an imperative mood</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D415&#34;</span>,   <span style="color:#75715e"># pydocstyle - missing terminal punctuation (.,? or !)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># &#34;PERF401&#34; # Perflint - `for` loop can be replaced by list comprehension</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Consider removing these for projects/publication</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D1&#34;</span>,     <span style="color:#75715e"># pydocstyle - missing docstring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ERA001&#34;</span>, <span style="color:#75715e"># eradicate - found commented out code</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;T201&#34;</span>,   <span style="color:#75715e"># flake8-print - `print` found</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;T203&#34;</span>,   <span style="color:#75715e"># flake8-print - `pprint` found</span>
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">lint</span>.<span style="color:#a6e22e">per-file-ignores</span>]
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;tests/*.py&#34;</span> = [<span style="color:#e6db74">&#34;S101&#34;</span>]  <span style="color:#75715e"># Use of `assert` detected</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;test_*.py&#34;</span>  = [<span style="color:#e6db74">&#34;S101&#34;</span>]  <span style="color:#75715e"># </span>
</span></span></code></pre></div><p>At the moment this gets me through most of my scripts and is small enough to transfer to a <code>pyproject.toml</code> if needed.</p>
<p>There are plenty of example <a href="(https://github.com/astral-sh/ruff#whos-using-ruff)">GitHub projects using Ruff</a> to show examples of configuration.</p>
<hr>
<h3 id="integrating-ruff-into-your-workflow">Integrating Ruff into your workflow<a hidden class="anchor" aria-hidden="true" href="#integrating-ruff-into-your-workflow">#</a></h3>
<h4 id="cli">CLI<a hidden class="anchor" aria-hidden="true" href="#cli">#</a></h4>
<p>See <a href="#basic-cli-usage">Basic CLI Usage</a>.</p>
<hr>
<h4 id="ide">IDE<a hidden class="anchor" aria-hidden="true" href="#ide">#</a></h4>
<p>As usual, Astral have done a great job with the <a href="https://docs.astral.sh/ruff/editors/setup/">Editors Setup Documentation</a>.</p>
<p>I use VSCode and its pretty simple:</p>
<ol>
<li>
<p>Install and enable the <a href="https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff">Ruff Extension</a> from the Visual Studio Marketplace.</p>
</li>
<li>
<p>Configure Ruff to be the default and take action on save:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span> <span style="color:#f92672">// Editor</span>: <span style="color:#ae81ff">Python Specific Settings</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;[python]&#34;: </span>{
</span></span><span style="display:flex; background-color:#3c3d38"><span>   <span style="color:#f92672">&#34;editor.defaultFormatter&#34;: </span><span style="color:#e6db74">&#34;charliermarsh.ruff&#34;</span>,
</span></span><span style="display:flex; background-color:#3c3d38"><span>   <span style="color:#f92672">&#34;editor.formatOnSave&#34;: </span><span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex; background-color:#3c3d38"><span>   <span style="color:#f92672">&#34;editor.codeActionsOnSave&#34;: </span>{
</span></span><span style="display:flex;"><span>     <span style="color:#ae81ff">// &#34;source.fixAll&#34;: &#34;explicit&#34;,</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>     <span style="color:#f92672">&#34;source.organizeImports&#34;: </span><span style="color:#e6db74">&#34;explicit&#34;</span>,
</span></span><span style="display:flex;"><span>   },
</span></span><span style="display:flex;"><span> },
</span></span></code></pre></div></li>
</ol>
<p>You can include and exclude rules in the <code>settings.json</code>, but they are better placed in a project TOML file.</p>
<p>Once installed in VSCode, Ruff will automatically execute when you open or edit a Python file.</p>
<p><img alt="<code>example.py</code> in VSCode with Ruff" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-6.png"></p>
<p>You can click the rule in the <em>Problem</em> panel and get sent to a webpage explaining that rule. You can right click the issue and select auto-fix, ignore, etc. All good stuff.</p>
<hr>
<h4 id="pre-commit">Pre-Commit<a hidden class="anchor" aria-hidden="true" href="#pre-commit">#</a></h4>
<p>If you have <a href="https://pre-commit.com/">pre-commit</a> setup for your project, you can add the <a href="https://github.com/astral-sh/ruff-pre-commit">ruff-pre-commit</a> to it as well</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># .pre-commit-config.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">repos</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">repo</span>: <span style="color:#ae81ff">https://github.com/astral-sh/ruff-pre-commit</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Ruff version.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rev</span>: <span style="color:#ae81ff">v0.12.10</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hooks</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Run the linter.</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">ruff-check</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># args: [ --fix ]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Run the formatter.</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">ruff-format</span>
</span></span></code></pre></div><hr>
<h4 id="github-action">GitHub Action<a hidden class="anchor" aria-hidden="true" href="#github-action">#</a></h4>
<p>If you have <a href="https://docs.github.com/en/actions/get-started/quickstart">GitHub Actions</a> setup for your project, you can add a <a href="https://github.com/astral-sh/ruff-action">ruff-action</a> to it as well. Either as a file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># ruff.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Ruff</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>: [ <span style="color:#ae81ff">push, pull_request ]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ruff</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v4</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">astral-sh/ruff-action@v3</span>
</span></span></code></pre></div><p>&hellip;or adding the following to your CI/CD workflow:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>      - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">astral-sh/ruff-action@v3</span>
</span></span></code></pre></div><hr>
<h2 id="tips">Tips<a hidden class="anchor" aria-hidden="true" href="#tips">#</a></h2>
<ul>
<li>
<p><strong>What config file is it using now?</strong></p>
<ul>
<li>
<p><strong>CLI</strong>: add <code>--verbose</code> and it will one of the first things printed</p>
</li>
<li>
<p><strong>VSCode</strong>: Add the following to your workspace settings:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">&#34;ruff.logLevel&#34;: </span><span style="color:#e6db74">&#34;debug&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;ruff.logFile&#34;: </span><span style="color:#e6db74">&#34;c:/temp/ruff.log&#34;</span>,
</span></span></code></pre></div><ul>
<li>The log will show which TOML is being used (there may be more than one referenced in the log)</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>How do I get Ruff to ignore this line only?</strong></p>
<ul>
<li>Sometimes not everything is fixable, or needs to be fixed</li>
<li>Add <code># noqa: &lt;rule&gt;</code> to the line, e.g., <code># noqa: D201</code>, and it will get ignored</li>
</ul>
</li>
<li>
<p><strong>I like <a href="https://github.com/psf/black">Black</a>, can I use it as well as Ruff?</strong></p>
<ul>
<li>
<p><strong>CLI</strong>: No problem. They are different sections of the <code>pyproject.toml</code> file</p>
<ul>
<li><strong>Important</strong>: Make sure the <code>line-length</code> setting is the same for both or they will forever fight each other</li>
<li>Run <code>ruff check example.py</code> and <code>black example.py</code> as you normally would on the CLI</li>
</ul>
</li>
<li>
<p><strong>VSCode</strong>: You can set Black to be the Formatter and Ruff to be the Linter in the <code>settings.json</code> file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># settings.json</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;ruff.lint.enable&#34;: </span><span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;python.formatting.provider&#34;: </span><span style="color:#e6db74">&#34;black&#34;</span>,
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<hr>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Improving your code should be as painless as possible. The coverage and speed of Ruff helps greatly, but I think the biggest benefit I have seen is that I am learning from it.</p>
<p>The speed helps with the feedback-loop.</p>
<p>The use of TOML files is simple and easy to add/remove rules to.</p>
<p>Don&rsquo;t get bogged down with it, instead embrace it as you move forward.</p>
<hr>
<h2 id="further-reading">Further Reading<a hidden class="anchor" aria-hidden="true" href="#further-reading">#</a></h2>
<ul>
<li><a href="https://docs.astral.sh/ruff/">Ruff Documentation</a></li>
<li>Other Python code analysis tools that can give early warnings about certain aspects of your code, such as a complexity metric:
<ul>
<li><a href="https://github.com/rubik/radon">Radon</a></li>
<li><a href="https://github.com/rohaquinlop/complexipy">complexipy</a></li>
<li><a href="https://www.sciencedirect.com/science/article/abs/pii/S0164121222002370">A study testing how effective Cognitive Complexity is</a></li>
</ul>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/python/">Python</a></li>
      <li><a href="http://localhost:1313/tags/tools/">Tools</a></li>
      <li><a href="http://localhost:1313/tags/ruff/">Ruff</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/2025-07-27-modernizing-python-development-my-switch-to-uv/">
    <span class="title">« Prev</span>
    <br>
    <span>Modernizing Python Development: My Switch to UV</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/2025-07-12-test-post/">
    <span class="title">Next »</span>
    <br>
    <span>Test Post</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Jonathan B</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>


</body>

</html>
