<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Modernizing Python Development: Linting and Formatting with Ruff | Jonathan B</title>
<meta name="keywords" content="Python, Tools, Ruff">
<meta name="description" content="


Introduction
What are Linters and Formatters

Linters
Formatters
Why You Should Use Them


What is Ruff?
Getting Started with Ruff

Installation steps
Basic CLI Usage

ruff check --output-format concise .\example.py
ruff format .\example.py


Configuration

Rules


Integrating Ruff into your workflow

CLI
IDE
Pre-Commit
GitHub Actions




Tips
Conclusion
Further Reading


Introduction
Python development is evolving—today, code quality and consistency are more important than ever. Strict is the new cool.">
<meta name="author" content="Jonathan B">
<link rel="canonical" href="https://jbeattie5768.github.io/posts/2025-07-18-using-ruff-to-improve-python-development/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jbeattie5768.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jbeattie5768.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jbeattie5768.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jbeattie5768.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://jbeattie5768.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://jbeattie5768.github.io/posts/2025-07-18-using-ruff-to-improve-python-development/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://jbeattie5768.github.io/posts/2025-07-18-using-ruff-to-improve-python-development/">
  <meta property="og:site_name" content="Jonathan B">
  <meta property="og:title" content="Modernizing Python Development: Linting and Formatting with Ruff">
  <meta property="og:description" content="
Introduction What are Linters and Formatters Linters Formatters Why You Should Use Them What is Ruff? Getting Started with Ruff Installation steps Basic CLI Usage ruff check --output-format concise .\example.py ruff format .\example.py Configuration Rules Integrating Ruff into your workflow CLI IDE Pre-Commit GitHub Actions Tips Conclusion Further Reading Introduction Python development is evolving—today, code quality and consistency are more important than ever. Strict is the new cool.">
  <meta property="og:locale" content="en-gb">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-07-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-18T00:00:00+00:00">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Tools">
    <meta property="article:tag" content="Ruff">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Modernizing Python Development: Linting and Formatting with Ruff">
<meta name="twitter:description" content="


Introduction
What are Linters and Formatters

Linters
Formatters
Why You Should Use Them


What is Ruff?
Getting Started with Ruff

Installation steps
Basic CLI Usage

ruff check --output-format concise .\example.py
ruff format .\example.py


Configuration

Rules


Integrating Ruff into your workflow

CLI
IDE
Pre-Commit
GitHub Actions




Tips
Conclusion
Further Reading


Introduction
Python development is evolving—today, code quality and consistency are more important than ever. Strict is the new cool.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://jbeattie5768.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Modernizing Python Development: Linting and Formatting with Ruff",
      "item": "https://jbeattie5768.github.io/posts/2025-07-18-using-ruff-to-improve-python-development/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Modernizing Python Development: Linting and Formatting with Ruff",
  "name": "Modernizing Python Development: Linting and Formatting with Ruff",
  "description": "\nIntroduction What are Linters and Formatters Linters Formatters Why You Should Use Them What is Ruff? Getting Started with Ruff Installation steps Basic CLI Usage ruff check --output-format concise .\\example.py ruff format .\\example.py Configuration Rules Integrating Ruff into your workflow CLI IDE Pre-Commit GitHub Actions Tips Conclusion Further Reading Introduction Python development is evolving—today, code quality and consistency are more important than ever. Strict is the new cool.\n",
  "keywords": [
    "Python", "Tools", "Ruff"
  ],
  "articleBody": "\nIntroduction What are Linters and Formatters Linters Formatters Why You Should Use Them What is Ruff? Getting Started with Ruff Installation steps Basic CLI Usage ruff check --output-format concise .\\example.py ruff format .\\example.py Configuration Rules Integrating Ruff into your workflow CLI IDE Pre-Commit GitHub Actions Tips Conclusion Further Reading Introduction Python development is evolving—today, code quality and consistency are more important than ever. Strict is the new cool.\nTools like Black have made opinionated formatting mainstream, and the need for readable, maintainable, and error-free code is greater than ever—especially as projects grow and AI-driven code/tools become more prevalent.\nAs The Zen of Python reminds us, “Readability counts”. The developer principle “code is written once but read many times” is still widely cited. But, maintaining high standards manually can be challenging and time-consuming. That’s where modern linters and formatters come in, helping us catch errors early and keep our codebases clean.\nIn this post, I’ll share my experience adopting Ruff, a fast, modern linter and formatter.\nWhat are Linters and Formatters Linters Linting is the automatic checking of your code for errors. Code that passes linting will probably run.\nTechnically, linting is Static Analysis, meaning they detect defects without running the code by analysing the syntax. Modern linters will also check for improvements to the code that may lead to incorrect results: suggesting more robust or accepted ways to code.\nLinters reduce errors and improve the quality of your code and therefore should be enabled in IDEs, where they continuously run in the background. Any CI/CD pipeline or pre-commit process should have linting enabled.\nA linter can be thought of as a formatter with syntax rules.\nFormatters A formatter makes your code pretty by standardising the appearance of the code. Formatters only change the presentation of the code, not its functionality.\nThis makes the code easy to read for you and everyone else, and this becomes more important when working in teams.\nFormatters use a set of rules for consistency. The PEP 8 – Style Guide for Python Code is one such set of standardised rules, but there are numerous anti-pattern rules followed by different formatter implementations as well.\nA formatter is opinionated about what it thinks pretty code is, but usually those opinions can be enabled, disabled, or ignored.\nWhy You Should Use Them https://xkcd.com/1695\nWhat is Ruff? Ruff is a fast, modern Python combined linter and formatter from Astral, the company that developed UV (see My Switch to UV).\nKey features of Ruff:\nWritten in Rust, so it’s fast A linter and formatter in one tool Designed as a compatible replacement for multiple existing linters and formatters Configurable (enable/disable) rules for linting and formatting IDE integration Command Line (CLI) usable Works for Python \u003e=3.7 So Ruff simplifies multiple linters and formatters into a single tool and performs those tasks fast. How quickly?\nThis graph from the Ruff website shows the time taken to lint the entire CPython codebase:\nsource: https://docs.astral.sh/ruff\nTaken from an Astral blog post, this graph shows the timings to format the ~250k line Zulip codebase:\nsource: https://astral.sh/blog/the-ruff-formatter\nSome of the tools it replaces are:\nflake8 (plus dozens of plugins)\npylint\npyupgrade\nautoflake\nrefurb\nperflint\nblack\nisort\npydocstyle\npydoclint\ntryceratops\nGetting Started with Ruff Installation steps Being an Astral tool, there are multiple methods of installing Ruff.\nFor me, I want to install Ruff as a system tool, so it is globally available to me all the time. I have UV installed, so I will install using that:\nuv tool install ruff If you do not have UV installed (I recommend you do; see My Switch to UV), you can install it directly with PowerShell:\npowershell -c \"irm https://astral.sh/ruff/install.ps1 | iex\" Alternatively, you can add it to your project tools as part of your virtual environment, or use other, more traditional, installation methods, e.g., pip, pipx:\nuv add --dev ruff # Install into Project Development Environment pip install ruff # Use one of the older install methods See the Ruff Install Documentation if your preferred install method is not mentioned here.\nBasic CLI Usage Once installed, you can run Ruff on the command line:\nruff check # Recursively lints all files, from this working directory ruff check . # Recursively lints all files, from this working directory ruff check test.py # Lint specific file only ruff check *.py # Lint all Python files in the current directory ruff format # Recursively format all files, from this working directory ruff format . # Recursively format all files, from this working directory ruff format test.py # Format specific file only ruff format *.py # Format all Python files in the current directory If you have not installed Ruff, but want to run the tool from within a UV-cached environment via UVX:\n# uvx is an alias for uv tool run uvx ruff check # Recursively lint all files, from this working directory uvx ruff format # Recursively format all files, from this working directory That’s all there is to it: two simple commands to lint and format.\nThe results of running either command are the important thing. As an example, let’s take this highly contrived, simple Python file that has syntax errors and formatting issues:\n1from sys import * 2import os, math 3 4num_strs = {\"Zero\": 0,\"One\":1, \"Two\": 2 , \"Three\": 3} 5str_nums = {0: \"Zero\" ,1:\"One\", 2:\"Two\" , 3: \"Three\"} 6 7def TranslateNumberString(numberstring 8): 9 10 \"\"\" 11 Example function 12 \"\"\" 13 if (True,): 14 return num_strs[numberstring] 15 16from pprint import pprint 17 18if __name__ == \"__main__\": 19 pprint(num_strs) 20 pprint(str_nums) 21 for x in range(3): 22 try: 23 r = TranslateNumberString(str_nums[x]) 24 print('Str {} = {}'.format(str_nums[x], r)) 25 except: 26 print(\"Damn!\") ruff check --output-format concise .\\example.py Here, I am linting this file and nd have set the output to concise (default is full), and passed in the --isolated flag (so Ruff will ignore my config files and use the defaults instead), see Configuration.\nI did say this was contrived!\nEven from those few lines of rushed code, I’ve got eight syntax errors.\nThe full format explains each fault found in more detail, for example:\nruff check .\\example.py\n# Both lines are equivalent ruff check example.py ruff check --output-format full example.py The linter cannot always fix detected issues. For the rules the linter can fix, see the legend in the Ruff Rules Documentation.\nIn this example, there are four errors fixable automatically (those with [*]). Let’s’ fix the easy ones automatically, as they are simple errors:\nruff check --diff example.py # Show what the changes 'would' be ruff check --fix example.py # Apply the changes You may get fixes that Ruff has classified as unsafe, indicating that the meaning of your code may change with those fixes. There are none in the example, but the commands to fix the unsafe-fixes are similar:\nruff check --unsafe-fixes --diff example.py # Show what the changes 'would' be ruff check --unsafe-fixes --fix example.py # Apply the changes Now we are down to four errors for our example, but there are no automatic fixes for those. Let’s go read the documentation for each errored rule and fix them manually:\nF403 from sys import * used; unable to detect undefined names Yes, star imports are bad, change to import sys F634 If test is a tuple, which is always True Change to if True: E402 Module level import not at top of file Move import to the top E722 Do not use bare except Change to except Exception as e: Sometimes. when you fix an issue, you will get another. In this case I got another F401 'sys' imported but unused error, which I also fixed. You always need to run the linter again until all the errors have been resolved.\nAs mentioned, errors state what the problem is and give a rule number (e.g., F403) that you can look up on the Ruff Rules pages to get more information and suggestions on how to fix.\nNote: When used within an IDE, hyperlinks are provided to quickly access information on the error.\nNow we have all checks passing:\nruff format .\\example.py Before we format the remaining code, let’s take a look at what would be changed:\nruff format --diff .\\example.py # Show what the changes 'would' be Again I am using the --isolated option to use the default rules only.\nlet’s accept those changes and let Ruff format the code:\nruff format .\\example.py # Apply the formatting changes The final code now looks like this:\nfrom pprint import pprint num_strs = {\"Zero\": 0, \"One\": 1, \"Two\": 2, \"Three\": 3} str_nums = {0: \"Zero\", 1: \"One\", 2: \"Two\", 3: \"Three\"} def TranslateNumberString(numberstring): \"\"\" Example function \"\"\" if True: return num_strs[numberstring] if __name__ == \"__main__\": pprint(num_strs) pprint(str_nums) for x in range(3): try: r = TranslateNumberString(str_nums[x]) print(\"Str {} = {}\".format(str_nums[x], r)) except Exception as e: print(f\"How exceptional! {e}\") Although the code runs and does what was intended, there are still issues with this code. Linters and formatters are only there to help you, not to replace you!\nConfiguration The rules used by Ruff are derived from multiple linters and formatters, and are configurable through hierarchical TOML files.\nWhether Ruff is used as a linter, a formatter, or both, configuration follows the same methodology. Ruff will search for a configuration file in one of the following files .ruff.toml, ruff.toml or pyproject.toml in the closest directory and in that order of preference. Alternatively, you can specify any TOML file with the --config option.\nIt is common to include Ruff configuration in your project pyproject.toml file, as the Ruff configuration can be included in the projects version control.\nThe majority of projects using Ruff, as listed by Astral, use the projects existing pyproject.toml to store their Ruff configuration. For example:\nFastApi using pyproject.toml\nPandas using pyproject.toml\nPolars using pyproject.toml\nAs an aside, SCiPy has renamed their Ruff config file lint.toml and explicitly referenced it in calling Ruff with the --config option.\nSciPy lint.toml\nSciPy calling Ruff with the --config option\nThere is no reason not to have a separate ruff.toml in your project directory.\nThat’s all well and good, but what if we don’t have a project, but still want to check certain files on the command line. We have four options:\nAdd a pyproject.toml to the directory Add a ruff.toml to the directory Use the --config option and point to an existing ruff.toml located elsewhere Have a default global ruff.toml that will be used if no other configuration file is located. For me, option four is preferred for the way I work (although I am trying to use pyproject.toml more often, even for sandbox directories). I now have a default ruff.toml in my Windows home directory and a symbolic link to the Ruff directory:\n# Needs to be run as *PowerShell Admin (only Admin can create links) # Use '-Force' in case '\\AppData\\Roaming\\Ruff' dir has not been created New-Item -ItemType SymbolicLink -Force -Path \"$env:USERPROFILE\\AppData\\Roaming\\Ruff\\ruff.toml\" -Target \"$env:USERPROFILE\\ruff.toml\" In my opinion, Ruff is a little lacking in not allowing a home directory default or fallback configuration file. Instead it has its file discovery, one of which is the ${config_dir}/ruff/ directory. For Windows, the $(config_dir) is equivalent to %userprofile%\\AppData\\Roaming, and if there is a pyproject.toml or ruff.toml located in the associated Ruff directory, that TOML will be used if no local config file is found.\nRules Ruff rules are based on codes, [Letter Prefix][Number Code], e.g., F841.\nThe letter prefix indicates groups that are the source of the rule. This becomes more obvious when you look at the online Rules Documentation.\nAdditionally, there are Settings which work alongside rules and define some rule parameters. For example, E501 is “line too long”, which has a default of 88, but the setting line-length allows you to define the length after which this rule will be triggered, e.g.,:\n# pyproject.toml [tool.ruff] line-length = 120 # Allow lines to be as long as 120. The best way to start with your Ruff configuration is to add all rules, or the default set of group rules, and remove rules as they annoy you:\n# pyproject.toml [tool.ruff.lint] select = [\"ALL\"] # pyproject.toml [tool.ruff.lint] # RUFF DEFAULTS select = [ \"F\", # pyflakes – detects syntax errors and basic mistakes \"E4\", # pycodestyle errors (part of E group) \"E7\", # pycodestyle E7xx errors (naming, etc.) \"E9\", # pycodestyle E9xx errors (syntax) ] I have opted to add all rules and remove them as they annoy me. Defining \"ALL\" will at least mean that if any new rules are implemented, I will not miss the chance for those rules to annoy me.\n# ruff.toml # Settings line-length = 120 # To keep aligned with .editorconfig [format] line-ending = \"lf\" # Use `\\n` line endings [lint] select = [\"ALL\"] ignore = [ \"ANN\", # flake8-annotations - MyPy is checking annotations \"S311\", # flake8-bandit - cryptographically weak `random` used \"RET504\", # flake8-return - unnecessary assignment before `return` statement \"D200\", # pydocstyle - unnecessary multiline docstring \"D203\", # pydocstyle - blank line before class docstring \"D212\", # pydocstyle - docstring not on 1st line after opening quotes \"D400\", # pydocstyle - missing trailing period in docstring \"D401\", # pydocstyle - docstring first lines are not in an imperative mood \"D415\", # pydocstyle - missing terminal punctuation (.,? or !) # \"PERF401\" # Perflint - `for` loop can be replaced by list comprehension # Consider removing these for projects/publication \"D1\", # pydocstyle - missing docstring \"ERA001\", # eradicate - found commented out code \"T201\", # flake8-print - `print` found \"T203\", # flake8-print - `pprint` found ] [lint.per-file-ignores] \"tests/*.py\" = [\"S101\"] # Use of `assert` detected \"test_*.py\" = [\"S101\"] # At the moment, this gets me through most of my scripts and is small enough to transfer to a pyproject.toml if needed.\nThere are plenty of GitHub projects using Ruff to show configuration examples.\nIntegrating Ruff into your workflow CLI See Basic CLI Usage.\nIDE As usual, Astral have done a great job with the Editors Setup Documentation.\nI use VSCode and it is pretty simple:\nInstall and enable the Ruff Extension from the Visual Studio Marketplace.\nConfigure Ruff to be the default formatter and take action on save:\n// Editor: Python Specific Settings \"[python]\": { \"editor.defaultFormatter\": \"charliermarsh.ruff\", \"editor.formatOnSave\": true, \"editor.codeActionsOnSave\": { // \"source.fixAll\": \"explicit\", \"source.organizeImports\": \"explicit\", }, }, You can include and exclude rules in the settings.json, but they are better placed in a project TOML file.\nOnce installed in VSCode, Ruff will automatically run when you open or edit a Python file.\nYou can click the rule in the Problems panel and be taken to a webpage explaining that rule. You can right-click the issue and select auto-fix, ignore, etc. All good stuff.\nPre-Commit If you have pre-commit set up for your project, you can add the ruff-pre-commit to it as well.\n# .pre-commit-config.yaml repos: - repo: https://github.com/astral-sh/ruff-pre-commit # Ruff version. rev: v0.12.10 hooks: # Run the linter. - id: ruff-check # args: [ --fix ] # Run the formatter. - id: ruff-format GitHub Actions If you have GitHub Actions set up for your project, you can add a ruff-action to it as well. Either as a file:\n# ruff.yml name: Ruff on: [ push, pull_request ] jobs: ruff: runs-on: ubuntu-latest steps: - uses: actions/checkout@v6 - uses: astral-sh/ruff-action@v3 …or add the following to your CI/CD workflow:\n- uses: astral-sh/ruff-action@v3 Tips Which config file is it using now?\nCLI: add --verbose and it will one of the first things printed\nVSCode: Add the following to your workspace settings:\n\"ruff.logLevel\": \"debug\", \"ruff.logFile\": \"c:/temp/ruff.log\", The log will show which TOML is being used (there may be more than one referenced in the log) How do I get Ruff to ignore only this line?\nSometimes not everything is fixable, or needs to be fixed Add # noqa: to the line, e.g., # noqa: D201, and it will get ignored I like Black; can I use it as well as Ruff?\nCLI: No problem. They are in different sections of the pyproject.toml file\nImportant: Make sure the line-length setting is the same for both, or they will continually conflict Run ruff check example.py and black example.py as you normally would on the CLI VSCode: You can set Black to be the Formatter and Ruff to be the Linter in the settings.json file\n# settings.json \"ruff.lint.enable\": true, ... ... \"python.formatting.provider\": \"black\", ... ... I do not want it to format a section of code\nAdd the # fmt: off/# fmt: on pairing around the code you do not want formatted. These need to be on separate lines. For single lines, use # fmt: skip after the command to be left unchanged. Examples for both options: # fmt: off for status in [(-1, -1), (-1, 0), (-1, 1), ( 0, -1), ( 0, 1), # show (row,col) offset ( 1, -1), ( 1, 0), ( 1, 1)]: # fmt: on print(f\"Status: {status}\") # Ruff Formatting would change this to be: for status in [(-1, -1), (-1, 0), (-1, 1), (0, -1), (0, 1), (1, -1), (1, 0), (1, 1)]: print(f\"Status: {status}\") import pdb; pdb.set_trace() # fmt: skip # Ruff formatting would change this to be: import pdb pdb.set_trace() Conclusion Improving your code should be as painless as possible. The coverage and speed of Ruff help greatly, but I think the biggest benefit I have seen is that I am learning from it.\nThe speed helps with the feedback loop.\nThe use of TOML files is simple and easy to add or remove rules.\nDo not get bogged down with it; instead embrace it as you move forward.\nFurther Reading Ruff Documentation Other Python code analysis tools that can give early warnings about certain aspects of your code, such as a complexity metric: Radon complexipy A study testing how effective Cognitive Complexity is Edits to this Post 05 Jan 2026: Added “I do not want it to format a section of code” entry to Tips section. 05 Jan 2026: Added banner image and updated some formatting. 12 Jan 2026: MD Linting and AI Spelling, Grammar checks. ",
  "wordCount" : "2997",
  "inLanguage": "en",
  "datePublished": "2025-07-18T00:00:00Z",
  "dateModified": "2025-07-18T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Jonathan B"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jbeattie5768.github.io/posts/2025-07-18-using-ruff-to-improve-python-development/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Jonathan B",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jbeattie5768.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jbeattie5768.github.io/" accesskey="h" title="Jonathan B (Alt + H)">Jonathan B</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jbeattie5768.github.io/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://jbeattie5768.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://jbeattie5768.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://jbeattie5768.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://jbeattie5768.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://jbeattie5768.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Modernizing Python Development: Linting and Formatting with Ruff
    </h1>
    <div class="post-meta"><span title='2025-07-18 00:00:00 +0000 UTC'>July 18, 2025</span>&nbsp;·&nbsp;Jonathan B

</div>
  </header> 
  <div class="post-content"><p><img alt="Diff Changes for <code>example.py</code>" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-5.png"></p>
<p><a href="https://github.com/astral-sh/ruff"><img alt="Ruff" loading="lazy" src="https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json"></a></p>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-are-linters-and-formatters">What are Linters and Formatters</a>
<ul>
<li><a href="#linters">Linters</a></li>
<li><a href="#formatters">Formatters</a></li>
<li><a href="#why-you-should-use-them">Why You Should Use Them</a></li>
</ul>
</li>
<li><a href="#what-is-ruff">What is Ruff?</a></li>
<li><a href="#getting-started-with-ruff">Getting Started with Ruff</a>
<ul>
<li><a href="#installation-steps">Installation steps</a></li>
<li><a href="#basic-cli-usage">Basic CLI Usage</a>
<ul>
<li><a href="#ruff-check---output-format-concise-examplepy"><code>ruff check --output-format concise .\example.py</code></a></li>
<li><a href="#ruff-format-examplepy"><code>ruff format .\example.py</code></a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a>
<ul>
<li><a href="#rules">Rules</a></li>
</ul>
</li>
<li><a href="#integrating-ruff-into-your-workflow">Integrating Ruff into your workflow</a>
<ul>
<li><a href="#cli">CLI</a></li>
<li><a href="#ide">IDE</a></li>
<li><a href="#pre-commit">Pre-Commit</a></li>
<li><a href="#github-actions">GitHub Actions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#tips">Tips</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#further-reading">Further Reading</a></li>
</ul>
<hr>
<h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>Python development is evolving—today, code quality and consistency are more important than ever. <strong>Strict</strong> is the new <em>cool</em>.</p>
<p>Tools like <a href="https://github.com/psf/black">Black</a> have made opinionated formatting mainstream, and the need for readable, maintainable, and error-free code is greater than ever—especially as projects grow and AI-driven code/tools become more prevalent.</p>
<p>As <a href="https://peps.python.org/pep-0020/">The Zen of Python</a> reminds us, &ldquo;Readability counts&rdquo;. The developer principle <a href="https://retrocomputing.stackexchange.com/questions/15724/who-are-we-quoting-when-we-note-that-code-is-written-once-but-read-many-times">&ldquo;code is written once but read many times&rdquo;</a> is still widely cited. But, maintaining high standards manually can be challenging and time-consuming. That’s where modern linters and formatters come in, helping us catch errors early and keep our codebases clean.</p>
<p>In this post, I’ll share my experience adopting <a href="https://docs.astral.sh/ruff/">Ruff</a>, a fast, modern linter and formatter.</p>
<hr>
<h2 id="what-are-linters-and-formatters">What are Linters and Formatters<a hidden class="anchor" aria-hidden="true" href="#what-are-linters-and-formatters">#</a></h2>
<hr>
<h3 id="linters">Linters<a hidden class="anchor" aria-hidden="true" href="#linters">#</a></h3>
<p>Linting is the automatic checking of your code for errors. Code that passes linting will probably run.</p>
<p>Technically, linting is <a href="https://en.wikipedia.org/wiki/Static_program_analysis">Static Analysis</a>, meaning they detect defects without running the code by analysing the syntax. Modern linters will also check for improvements to the code that <strong>may</strong> lead to incorrect results: suggesting more robust or accepted ways to code.</p>
<p>Linters reduce errors and improve the quality of your code and therefore should be enabled in IDEs, where they continuously run in the background. Any CI/CD pipeline or pre-commit process should have linting enabled.</p>
<p>A linter can be thought of as a formatter with syntax rules.</p>
<hr>
<h3 id="formatters">Formatters<a hidden class="anchor" aria-hidden="true" href="#formatters">#</a></h3>
<p>A formatter makes your code <em>pretty</em> by standardising the appearance of the code. Formatters only change the presentation of the code, not its functionality.<br>
This makes the code easy to read for you and everyone else, and this becomes more important when working in teams.</p>
<p>Formatters use a set of rules for consistency. The <a href="https://peps.python.org/pep-0008/">PEP 8 – Style Guide for Python Code</a> is one such set of standardised rules, but there are numerous anti-pattern rules followed by different formatter implementations as well.</p>
<p>A formatter is opinionated about what it thinks <em>pretty code</em> is, but usually those opinions can be enabled, disabled, or ignored.</p>
<hr>
<h3 id="why-you-should-use-them">Why You Should Use Them<a hidden class="anchor" aria-hidden="true" href="#why-you-should-use-them">#</a></h3>
<p><img alt="XKCD 1695" loading="lazy" src="https://imgs.xkcd.com/comics/code_quality_2.png"> <em><a href="https://xkcd.com/1695">https://xkcd.com/1695</a></em></p>
<hr>
<h2 id="what-is-ruff">What is Ruff?<a hidden class="anchor" aria-hidden="true" href="#what-is-ruff">#</a></h2>
<p><a href="https://docs.astral.sh/ruff/">Ruff</a> is a fast, modern Python combined linter and formatter from <a href="https://astral.sh/">Astral</a>, the company that developed UV (see <a href="https://jbeattie5768.github.io/posts/2025-07-27-modernizing-python-development-my-switch-to-uv/">My Switch to UV</a>).</p>
<p>Key features of Ruff:</p>
<ul>
<li>Written in Rust, so it&rsquo;s fast</li>
<li>A linter and formatter in one tool</li>
<li>Designed as a compatible replacement for multiple existing linters and formatters</li>
<li>Configurable (enable/disable) rules for linting and formatting</li>
<li>IDE integration</li>
<li>Command Line (CLI) usable</li>
<li>Works for Python &gt;=3.7</li>
</ul>
<p>So Ruff simplifies multiple linters and formatters into a single tool and performs those tasks <strong>fast</strong>. How quickly?<br>
This graph from the Ruff website shows the time taken to <em>lint</em> the entire <a href="https://github.com/python/cpython">CPython</a> codebase:</p>
<p><img alt="alt text" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-0.png"> <em>source: <a href="https://docs.astral.sh/ruff">https://docs.astral.sh/ruff</a></em></p>
<p>Taken from an Astral blog post, this graph shows the timings to <em>format</em> the ~250k line <a href="https://github.com/zulip/zulip">Zulip</a> codebase:</p>
<p><img alt="Ruff Formatter Speed Comparison" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-1.png"> <em>source: <a href="https://astral.sh/blog/the-ruff-formatter">https://astral.sh/blog/the-ruff-formatter</a></em></p>
<p>Some of the tools it replaces are:</p>
<ul>
<li>
<p><a href="https://github.com/PyCQA/flake8">flake8</a> <em>(plus dozens of plugins)</em></p>
</li>
<li>
<p><a href="https://github.com/pylint-dev/pylint">pylint</a></p>
</li>
<li>
<p><a href="https://github.com/asottile/pyupgrade">pyupgrade</a></p>
</li>
<li>
<p><a href="https://github.com/PyCQA/autoflake">autoflake</a></p>
</li>
<li>
<p><a href="https://github.com/dosisod/refurb">refurb</a></p>
</li>
<li>
<p><a href="https://github.com/tonybaloney/perflint">perflint</a></p>
</li>
<li>
<p><a href="https://github.com/psf/black">black</a></p>
</li>
<li>
<p><a href="https://github.com/PyCQA/isort">isort</a></p>
</li>
<li>
<p><a href="https://github.com/PyCQA/pydocstyle">pydocstyle</a></p>
</li>
<li>
<p><a href="https://github.com/jsh9/pydoclint">pydoclint</a></p>
</li>
<li>
<p><a href="https://github.com/guilatrova/tryceratops">tryceratops</a></p>
</li>
</ul>
<hr>
<h2 id="getting-started-with-ruff">Getting Started with Ruff<a hidden class="anchor" aria-hidden="true" href="#getting-started-with-ruff">#</a></h2>
<hr>
<h3 id="installation-steps">Installation steps<a hidden class="anchor" aria-hidden="true" href="#installation-steps">#</a></h3>
<p>Being an Astral tool, there are multiple methods of installing Ruff.<br>
For me, I want to install Ruff as a system tool, so it is globally available to me all the time. I have UV installed, so I will install using that:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>uv tool install ruff
</span></span></code></pre></div><p><img alt="alt text" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/2025-07-18-uv-ruff-01.jpg"></p>
<p>If you do not have UV installed (I recommend you do; see <a href="https://jbeattie5768.github.io/posts/2025-07-27-modernizing-python-development-my-switch-to-uv/">My Switch to UV</a>), you can install it directly with PowerShell:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>powershell -c <span style="color:#e6db74">&#34;irm https://astral.sh/ruff/install.ps1 | iex&#34;</span>
</span></span></code></pre></div><p>Alternatively, you can add it to your project tools as part of your virtual environment, or use other, more traditional, installation methods, e.g., pip, pipx:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>uv add --dev ruff  <span style="color:#75715e"># Install into Project Development Environment</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pip install ruff   <span style="color:#75715e"># Use one of the older install methods </span>
</span></span></code></pre></div><p>See the <a href="https://docs.astral.sh/ruff/installation/">Ruff Install Documentation</a> if your preferred install method is not mentioned here.</p>
<hr>
<h3 id="basic-cli-usage">Basic CLI Usage<a hidden class="anchor" aria-hidden="true" href="#basic-cli-usage">#</a></h3>
<p>Once installed, you can run Ruff on the command line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff check           <span style="color:#75715e"># Recursively lints all files, from this working directory</span>
</span></span><span style="display:flex;"><span>ruff check .         <span style="color:#75715e"># Recursively lints all files, from this working directory</span>
</span></span><span style="display:flex;"><span>ruff check test.py   <span style="color:#75715e"># Lint specific file only </span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>ruff check *.py      <span style="color:#75715e"># Lint all Python files in the current directory</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ruff format          <span style="color:#75715e"># Recursively format all files, from this working directory</span>
</span></span><span style="display:flex;"><span>ruff format .        <span style="color:#75715e"># Recursively format all files, from this working directory</span>
</span></span><span style="display:flex;"><span>ruff format test.py  <span style="color:#75715e"># Format specific file only</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>ruff format *.py     <span style="color:#75715e"># Format all Python files in the current directory</span>
</span></span></code></pre></div><p>If you have not installed Ruff, but want to run the tool from within a UV-cached environment via <a href="https://docs.astral.sh/uv/concepts/tools/#execution-vs-installation">UVX</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># uvx is an alias for uv tool run</span>
</span></span><span style="display:flex;"><span>uvx ruff check       <span style="color:#75715e"># Recursively lint all files, from this working directory</span>
</span></span><span style="display:flex;"><span>uvx ruff format      <span style="color:#75715e"># Recursively format all files, from this working directory</span>
</span></span></code></pre></div><hr>
<p>That&rsquo;s all there is to it: two simple commands to lint and format.<br>
The results of running either command are the important thing. As an example, let&rsquo;s take this highly contrived, simple Python file that has syntax errors and formatting issues:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#f92672">from</span> sys <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#f92672">import</span> os<span style="color:#f92672">,</span> math
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>num_strs <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Zero&#34;</span>: <span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#34;One&#34;</span>:<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;Two&#34;</span>: <span style="color:#ae81ff">2</span> , <span style="color:#e6db74">&#34;Three&#34;</span>: <span style="color:#ae81ff">3</span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>str_nums <span style="color:#f92672">=</span> {<span style="color:#ae81ff">0</span>: <span style="color:#e6db74">&#34;Zero&#34;</span> ,<span style="color:#ae81ff">1</span>:<span style="color:#e6db74">&#34;One&#34;</span>,  <span style="color:#ae81ff">2</span>:<span style="color:#e6db74">&#34;Two&#34;</span> , <span style="color:#ae81ff">3</span>: <span style="color:#e6db74">&#34;Three&#34;</span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">TranslateNumberString</span>(numberstring
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#e6db74">    Example function
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">True</span>,):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>        <span style="color:#66d9ef">return</span> num_strs[numberstring]
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    pprint(num_strs)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    pprint(str_nums)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>            r <span style="color:#f92672">=</span> TranslateNumberString(str_nums[x])
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>            print(<span style="color:#e6db74">&#39;Str </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> = </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(str_nums[x], r))
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>        <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>            print(<span style="color:#e6db74">&#34;Damn!&#34;</span>)
</span></span></code></pre></div><hr>
<h4 id="ruff-check---output-format-concise-examplepy"><code>ruff check --output-format concise .\example.py</code><a hidden class="anchor" aria-hidden="true" href="#ruff-check---output-format-concise-examplepy">#</a></h4>
<p>Here, I am linting this file and nd have set the output to <em>concise</em> (default is <em>full</em>), and passed in the <code>--isolated</code> flag (so Ruff will ignore my config files and use the defaults instead), see <a href="#configuration">Configuration</a>.<br>
I did say this was <em>contrived</em>!</p>
<p><img alt="Ruff Linter Errors (Concise)" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-3.png"></p>
<p>Even from those few lines of rushed code, I&rsquo;ve got eight syntax errors.</p>
<p>The <em>full</em> format explains each fault found in more detail, for example:</p>
<p><code>ruff check .\example.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span><span style="color:#75715e"># Both lines are equivalent</span>
</span></span><span style="display:flex;"><span>ruff check example.py
</span></span><span style="display:flex;"><span>ruff check --output-format full example.py  
</span></span></code></pre></div><p><img alt="Ruff Linter Error (Full)" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-4.png"></p>
<p>The linter cannot always fix detected issues. For the rules the linter can fix, see the legend in the <a href="https://docs.astral.sh/ruff/rules/#legend">Ruff Rules Documentation</a>.</p>
<p>In this example, there are four errors fixable automatically (those with [*]). Let&rsquo;s&rsquo; fix the easy ones automatically, as they are simple errors:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff check --diff example.py  <span style="color:#75715e"># Show what the changes &#39;would&#39; be</span>
</span></span><span style="display:flex;"><span>ruff check --fix example.py   <span style="color:#75715e"># Apply the changes</span>
</span></span></code></pre></div><p><img alt="Auto-fix after Checking  the Diff" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-4b.png"></p>
<p>You may get fixes that Ruff has classified as unsafe, indicating that the <em>meaning</em> of your code <strong>may</strong> change with those fixes. There are none in the example, but the commands to fix the unsafe-fixes are similar:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff check --unsafe-fixes --diff example.py  <span style="color:#75715e"># Show what the changes &#39;would&#39; be</span>
</span></span><span style="display:flex;"><span>ruff check --unsafe-fixes --fix example.py   <span style="color:#75715e"># Apply the changes</span>
</span></span></code></pre></div><p>Now we are down to four errors for our example, but there are no automatic fixes for those. Let&rsquo;s go read the documentation for each errored rule and fix them manually:</p>
<ul>
<li>F403 <code>from sys import *</code> used; unable to detect undefined names
<ul>
<li>Yes, star imports are bad, change to <code>import sys</code></li>
</ul>
</li>
<li>F634 If test is a tuple, which is always <code>True</code>
<ul>
<li>Change to <code>if True:</code></li>
</ul>
</li>
<li>E402 Module level import not at top of file
<ul>
<li>Move import to the top</li>
</ul>
</li>
<li>E722 Do not use bare <code>except</code>
<ul>
<li>Change to <code>except Exception as e:</code></li>
</ul>
</li>
</ul>
<p>Sometimes. when you fix an issue, you will get another. In this case I got another <code>F401 'sys' imported but unused</code> error, which I also fixed. You always need to run the linter again until all the errors have been resolved.</p>
<p>As mentioned, errors state what the problem is and give a rule number (e.g., <a href="https://docs.astral.sh/ruff/rules/undefined-local-with-import-star/">F403</a>) that you can look up on the Ruff <a href="https://docs.astral.sh/ruff/rules/">Rules</a> pages to get more information and suggestions on how to fix.</p>
<blockquote class="note"><p>Note: When used within an IDE, hyperlinks are provided to quickly access information on the error.</p></blockquote>
<p>Now we have all checks passing:</p>
<p><img alt="Diff Changes for <code>example.py</code>" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-5.png"></p>
<hr>
<h4 id="ruff-format-examplepy"><code>ruff format .\example.py</code><a hidden class="anchor" aria-hidden="true" href="#ruff-format-examplepy">#</a></h4>
<p>Before we format the remaining code, let&rsquo;s take a look at what would be changed:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff format --diff .\example.py  <span style="color:#75715e"># Show what the changes &#39;would&#39; be</span>
</span></span></code></pre></div><p><img alt="Ruff Format Proposed Changes" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-2.png"></p>
<p>Again I am using the <code>--isolated</code> option to use the default rules only.<br>
let&rsquo;s accept those changes and let Ruff format the code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span>ruff format .\example.py   <span style="color:#75715e"># Apply the formatting changes</span>
</span></span></code></pre></div><p>The final code now looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pprint <span style="color:#f92672">import</span> pprint
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>num_strs <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Zero&#34;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#34;One&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;Two&#34;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;Three&#34;</span>: <span style="color:#ae81ff">3</span>}
</span></span><span style="display:flex;"><span>str_nums <span style="color:#f92672">=</span> {<span style="color:#ae81ff">0</span>: <span style="color:#e6db74">&#34;Zero&#34;</span>, <span style="color:#ae81ff">1</span>: <span style="color:#e6db74">&#34;One&#34;</span>, <span style="color:#ae81ff">2</span>: <span style="color:#e6db74">&#34;Two&#34;</span>, <span style="color:#ae81ff">3</span>: <span style="color:#e6db74">&#34;Three&#34;</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">TranslateNumberString</span>(numberstring):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Example function
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> num_strs[numberstring]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    pprint(num_strs)
</span></span><span style="display:flex;"><span>    pprint(str_nums)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            r <span style="color:#f92672">=</span> TranslateNumberString(str_nums[x])
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#34;Str </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> = </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(str_nums[x], r))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;How exceptional! </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>Although the code runs and does what was intended, there are still <em>issues</em> with this code. Linters and formatters are only there to help you, not to replace you!</p>
<hr>
<h3 id="configuration">Configuration<a hidden class="anchor" aria-hidden="true" href="#configuration">#</a></h3>
<p>The rules used by Ruff are derived from multiple linters and formatters, and are configurable through hierarchical TOML files.</p>
<p>Whether Ruff is used as a linter, a formatter, or both, configuration follows the same methodology. Ruff will search for a configuration file in one of the following files <code>.ruff.toml</code>, <code>ruff.toml</code> or <code>pyproject.toml</code> in the closest directory and in that order of preference. Alternatively, you can specify any TOML file with the <code>--config</code> option.</p>
<p>It is common to include Ruff configuration in your project <code>pyproject.toml</code> file, as the Ruff configuration can be included in the projects version control.<br>
The majority of projects using Ruff, as <a href="https://github.com/astral-sh/ruff#whos-using-ruff">listed by Astral</a>, use the projects existing <code>pyproject.toml</code> to store their Ruff configuration. For example:</p>
<p><a href="https://github.com/fastapi/fastapi/blob/master/pyproject.toml">FastApi using <code>pyproject.toml</code></a><br>
<a href="https://github.com/pandas-dev/pandas/blob/main/pyproject.toml">Pandas using <code>pyproject.toml</code></a><br>
<a href="https://github.com/pola-rs/polars/blob/0c4650f1e066e3c02507df8a778f0ff02c352a48/py-polars/pyproject.toml">Polars using <code>pyproject.toml</code></a></p>
<blockquote class="note"><p>As an aside, SCiPy has renamed their Ruff config file <code>lint.toml</code> and explicitly referenced it in calling Ruff with the <code>--config</code> option.<br>
<a href="https://github.com/scipy/scipy/blob/432ce1a23d6a534d5a8845488229c7f2f1b5a100/tools/lint.toml">SciPy <code>lint.toml</code></a><br>
<a href="https://github.com/scipy/scipy/blob/432ce1a23d6a534d5a8845488229c7f2f1b5a100/tools/lint.py#L72-L81">SciPy calling Ruff with the <code>--config</code> option</a></p></blockquote>
<p>There is no reason not to have a separate <code>ruff.toml</code> in your project directory.</p>
<p>That&rsquo;s all well and good, but what if we don&rsquo;t have a project, but still want to check certain files on the command line. We have four options:</p>
<ol>
<li>Add a <code>pyproject.toml</code> to the directory</li>
<li>Add a <code>ruff.toml</code> to the directory</li>
<li>Use the <code>--config</code> option and point to an existing <code>ruff.toml</code> located elsewhere</li>
<li>Have a default <em>global</em> <code>ruff.toml</code> that will be used if no other configuration file is located.</li>
</ol>
<p>For me, option four is preferred for the way I work (although I am trying to use <code>pyproject.toml</code> more often, even for <em>sandbox</em> directories). I now have a default <code>ruff.toml</code> in my Windows home directory and a symbolic link to the Ruff directory:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-pwsh" data-lang="pwsh"><span style="display:flex;"><span><span style="color:#75715e"># Needs to be run as *PowerShell Admin (only Admin can create links)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use &#39;-Force&#39; in case &#39;\AppData\Roaming\Ruff&#39; dir has not been created</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>New-Item -ItemType SymbolicLink -Force -Path <span style="color:#e6db74">&#34;</span>$env:USERPROFILE<span style="color:#e6db74">\AppData\Roaming\Ruff\ruff.toml&#34;</span> -Target <span style="color:#e6db74">&#34;</span>$env:USERPROFILE<span style="color:#e6db74">\ruff.toml&#34;</span>
</span></span></code></pre></div><p>In my opinion, Ruff is a little lacking in not allowing a home directory default or fallback configuration file. Instead it has its <a href="https://docs.astral.sh/ruff/configuration/#config-file-discovery">file discovery</a>, one of which is the <code>${config_dir}/ruff/</code> directory. For Windows, the <code>$(config_dir)</code> is equivalent to <code>%userprofile%\AppData\Roaming</code>, and if there is a <code>pyproject.toml</code> or <code>ruff.toml</code> located in the associated Ruff directory, that TOML will be used if no local config file is found.</p>
<hr>
<h4 id="rules">Rules<a hidden class="anchor" aria-hidden="true" href="#rules">#</a></h4>
<p>Ruff rules are based on codes, <strong><em>[Letter Prefix][Number Code]</em></strong>, e.g., F841.<br>
The letter prefix indicates groups that are the source of the rule. This becomes more obvious when you look at the online <a href="https://docs.astral.sh/ruff/rules/">Rules Documentation</a>.</p>
<p>Additionally, there are <a href="https://docs.astral.sh/ruff/settings/">Settings</a> which work alongside rules and define some rule parameters. For example, <a href="https://docs.astral.sh/ruff/rules/line-too-long/"><code>E501</code></a> is &ldquo;<em>line too long</em>&rdquo;, which has a default of 88, but the setting <code>line-length</code> allows you to define the length after which this rule will be triggered, e.g.,:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-toml" data-lang="toml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># pyproject.toml</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">ruff</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">line-length</span> = <span style="color:#ae81ff">120</span>  <span style="color:#75715e"># Allow lines to be as long as 120.</span>
</span></span></code></pre></div><hr>
<p>The best way to start with your Ruff configuration is to add all rules, or the default set of group rules, and remove rules as they annoy you:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-toml" data-lang="toml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># pyproject.toml</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">ruff</span>.<span style="color:#a6e22e">lint</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">select</span> = [<span style="color:#e6db74">&#34;ALL&#34;</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-toml" data-lang="toml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># pyproject.toml</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">tool</span>.<span style="color:#a6e22e">ruff</span>.<span style="color:#a6e22e">lint</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># RUFF DEFAULTS</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">select</span> = [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;F&#34;</span>,    <span style="color:#75715e"># pyflakes – detects syntax errors and basic mistakes</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;E4&#34;</span>,   <span style="color:#75715e"># pycodestyle errors (part of E group)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;E7&#34;</span>,   <span style="color:#75715e"># pycodestyle E7xx errors (naming, etc.)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;E9&#34;</span>,   <span style="color:#75715e"># pycodestyle E9xx errors (syntax)</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><hr>
<p>I have opted to add all rules and remove them as they annoy me. Defining <code>&quot;ALL&quot;</code> will at least mean that if any new rules are implemented, I will not miss the chance for those rules to annoy me.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-toml" data-lang="toml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># ruff.toml</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Settings</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">line-length</span> = <span style="color:#ae81ff">120</span>  <span style="color:#75715e"># To keep aligned with .editorconfig</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">format</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">line-ending</span> = <span style="color:#e6db74">&#34;lf&#34;</span> <span style="color:#75715e"># Use `\n` line endings</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">lint</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">select</span> = [<span style="color:#e6db74">&#34;ALL&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ignore</span> = [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ANN&#34;</span>,    <span style="color:#75715e"># flake8-annotations - MyPy is checking annotations</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;S311&#34;</span>,   <span style="color:#75715e"># flake8-bandit - cryptographically weak `random` used</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;RET504&#34;</span>, <span style="color:#75715e"># flake8-return - unnecessary assignment before `return` statement</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D200&#34;</span>,   <span style="color:#75715e"># pydocstyle - unnecessary multiline docstring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D203&#34;</span>,   <span style="color:#75715e"># pydocstyle - blank line before class docstring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D212&#34;</span>,   <span style="color:#75715e"># pydocstyle - docstring not on 1st line after opening quotes</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D400&#34;</span>,   <span style="color:#75715e"># pydocstyle - missing trailing period in docstring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D401&#34;</span>,   <span style="color:#75715e"># pydocstyle - docstring first lines are not in an imperative mood</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D415&#34;</span>,   <span style="color:#75715e"># pydocstyle - missing terminal punctuation (.,? or !)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># &#34;PERF401&#34; # Perflint - `for` loop can be replaced by list comprehension</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Consider removing these for projects/publication</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;D1&#34;</span>,     <span style="color:#75715e"># pydocstyle - missing docstring</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ERA001&#34;</span>, <span style="color:#75715e"># eradicate - found commented out code</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;T201&#34;</span>,   <span style="color:#75715e"># flake8-print - `print` found</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;T203&#34;</span>,   <span style="color:#75715e"># flake8-print - `pprint` found</span>
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">lint</span>.<span style="color:#a6e22e">per-file-ignores</span>]
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;tests/*.py&#34;</span> = [<span style="color:#e6db74">&#34;S101&#34;</span>]  <span style="color:#75715e"># Use of `assert` detected</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;test_*.py&#34;</span>  = [<span style="color:#e6db74">&#34;S101&#34;</span>]  <span style="color:#75715e"># </span>
</span></span></code></pre></div><p>At the moment, this gets me through most of my scripts and is small enough to transfer to a <code>pyproject.toml</code> if needed.</p>
<p>There are plenty of  <a href="https://github.com/astral-sh/ruff#whos-using-ruff">GitHub projects using Ruff</a> to show configuration examples.</p>
<hr>
<h3 id="integrating-ruff-into-your-workflow">Integrating Ruff into your workflow<a hidden class="anchor" aria-hidden="true" href="#integrating-ruff-into-your-workflow">#</a></h3>
<h4 id="cli">CLI<a hidden class="anchor" aria-hidden="true" href="#cli">#</a></h4>
<p>See <a href="#basic-cli-usage">Basic CLI Usage</a>.</p>
<hr>
<h4 id="ide">IDE<a hidden class="anchor" aria-hidden="true" href="#ide">#</a></h4>
<p>As usual, Astral have done a great job with the <a href="https://docs.astral.sh/ruff/editors/setup/">Editors Setup Documentation</a>.</p>
<p>I use VSCode and it is pretty simple:</p>
<ol>
<li>
<p>Install and enable the <a href="https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff">Ruff Extension</a> from the Visual Studio Marketplace.</p>
</li>
<li>
<p>Configure Ruff to be the default formatter and take action on save:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span> <span style="color:#f92672">// Editor</span>: <span style="color:#ae81ff">Python Specific Settings</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;[python]&#34;: </span>{
</span></span><span style="display:flex; background-color:#3c3d38"><span>   <span style="color:#f92672">&#34;editor.defaultFormatter&#34;: </span><span style="color:#e6db74">&#34;charliermarsh.ruff&#34;</span>,
</span></span><span style="display:flex; background-color:#3c3d38"><span>   <span style="color:#f92672">&#34;editor.formatOnSave&#34;: </span><span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex; background-color:#3c3d38"><span>   <span style="color:#f92672">&#34;editor.codeActionsOnSave&#34;: </span>{
</span></span><span style="display:flex;"><span>     <span style="color:#ae81ff">// &#34;source.fixAll&#34;: &#34;explicit&#34;,</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>     <span style="color:#f92672">&#34;source.organizeImports&#34;: </span><span style="color:#e6db74">&#34;explicit&#34;</span>,
</span></span><span style="display:flex;"><span>   },
</span></span><span style="display:flex;"><span> },
</span></span></code></pre></div></li>
</ol>
<p>You can include and exclude rules in the <code>settings.json</code>, but they are better placed in a project TOML file.</p>
<p>Once installed in VSCode, Ruff will automatically run when you open or edit a Python file.</p>
<p><img alt="<code>example.py</code> in VSCode with Ruff" loading="lazy" src="/posts/2025-07-18-using-ruff-to-improve-python-development/images/image-6.png"></p>
<p>You can click the rule in the <em>Problems</em> panel and be taken to a webpage explaining that rule. You can right-click the issue and select auto-fix, ignore, etc. All good stuff.</p>
<hr>
<h4 id="pre-commit">Pre-Commit<a hidden class="anchor" aria-hidden="true" href="#pre-commit">#</a></h4>
<p>If you have <a href="https://pre-commit.com/">pre-commit</a> set up for your project, you can add the <a href="https://github.com/astral-sh/ruff-pre-commit">ruff-pre-commit</a> to it as well.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># .pre-commit-config.yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">repos</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">repo</span>: <span style="color:#ae81ff">https://github.com/astral-sh/ruff-pre-commit</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Ruff version.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">rev</span>: <span style="color:#ae81ff">v0.12.10</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hooks</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Run the linter.</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">ruff-check</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># args: [ --fix ]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Run the formatter.</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">ruff-format</span>
</span></span></code></pre></div><hr>
<h4 id="github-actions">GitHub Actions<a hidden class="anchor" aria-hidden="true" href="#github-actions">#</a></h4>
<p>If you have <a href="https://docs.github.com/en/actions/get-started/quickstart">GitHub Actions</a> set up for your project, you can add a <a href="https://github.com/astral-sh/ruff-action">ruff-action</a> to it as well. Either as a file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># ruff.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Ruff</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>: [ <span style="color:#ae81ff">push, pull_request ]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ruff</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v6</span>
</span></span><span style="display:flex; background-color:#3c3d38"><span>      - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">astral-sh/ruff-action@v3</span>
</span></span></code></pre></div><p>&hellip;or add the following to your CI/CD workflow:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex; background-color:#3c3d38"><span>      - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">astral-sh/ruff-action@v3</span>
</span></span></code></pre></div><hr>
<h2 id="tips">Tips<a hidden class="anchor" aria-hidden="true" href="#tips">#</a></h2>
<ul>
<li>
<p><strong>Which config file is it using now?</strong></p>
<ul>
<li>
<p><strong>CLI</strong>: add <code>--verbose</code> and it will one of the first things printed</p>
</li>
<li>
<p><strong>VSCode</strong>: Add the following to your workspace settings:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">&#34;ruff.logLevel&#34;: </span><span style="color:#e6db74">&#34;debug&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;ruff.logFile&#34;: </span><span style="color:#e6db74">&#34;c:/temp/ruff.log&#34;</span>,
</span></span></code></pre></div><ul>
<li>The log will show which TOML is being used (there may be more than one referenced in the log)</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>How do I get Ruff to ignore only this line?</strong></p>
<ul>
<li>Sometimes not everything is fixable, or needs to be fixed</li>
<li>Add <code># noqa: &lt;rule&gt;</code> to the line, e.g., <code># noqa: D201</code>, and it will get ignored</li>
</ul>
</li>
<li>
<p><strong>I like <a href="https://github.com/psf/black">Black</a>; can I use it as well as Ruff?</strong></p>
<ul>
<li>
<p><strong>CLI</strong>: No problem. They are in different sections of the <code>pyproject.toml</code> file</p>
<ul>
<li><strong>Important</strong>: Make sure the <code>line-length</code> setting is the same for both, or they will continually conflict</li>
<li>Run <code>ruff check example.py</code> and <code>black example.py</code> as you normally would on the CLI</li>
</ul>
</li>
<li>
<p><strong>VSCode</strong>: You can set Black to be the Formatter and Ruff to be the Linter in the <code>settings.json</code> file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-yaml" data-lang="yaml"><span style="display:flex; background-color:#3c3d38"><span><span style="color:#75715e"># settings.json</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;ruff.lint.enable&#34;: </span><span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;python.formatting.provider&#34;: </span><span style="color:#e6db74">&#34;black&#34;</span>,
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p><strong>I do not want it to format a section of code</strong></p>
<ul>
<li>Add the <code># fmt: off</code>/<code># fmt: on</code> pairing around the code you do not want formatted. These need to be on separate lines.</li>
<li>For single lines, use <code># fmt: skip</code> after the command to be left unchanged.</li>
<li>Examples for both options:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>  <span style="color:#75715e"># fmt: off</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> status <span style="color:#f92672">in</span> [(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>), (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>                 ( <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>),          ( <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>),  <span style="color:#75715e"># show (row,col) offset</span>
</span></span><span style="display:flex;"><span>                 ( <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), ( <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>), ( <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>)]:
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># fmt: on</span>
</span></span><span style="display:flex;"><span>      print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Status: </span><span style="color:#e6db74">{</span>status<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Ruff Formatting would change this to be:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> status <span style="color:#f92672">in</span> [(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>), (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>), (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>)]:
</span></span><span style="display:flex;"><span>      print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Status: </span><span style="color:#e6db74">{</span>status<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">import</span> pdb; pdb<span style="color:#f92672">.</span>set_trace()  <span style="color:#75715e"># fmt: skip</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Ruff formatting would change this to be:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">import</span> pdb
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  pdb<span style="color:#f92672">.</span>set_trace()
</span></span></code></pre></div></li>
</ul>
<hr>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Improving your code should be as painless as possible. The coverage and speed of Ruff help greatly, but I think the biggest benefit I have seen is that I am learning from it.</p>
<p>The speed helps with the feedback loop.</p>
<p>The use of TOML files is simple and easy to add or remove rules.</p>
<p>Do not get bogged down with it; instead embrace it as you move forward.</p>
<hr>
<h2 id="further-reading">Further Reading<a hidden class="anchor" aria-hidden="true" href="#further-reading">#</a></h2>
<ul>
<li><a href="https://docs.astral.sh/ruff/">Ruff Documentation</a></li>
<li>Other Python code analysis tools that can give early warnings about certain aspects of your code, such as a complexity metric:
<ul>
<li><a href="https://github.com/rubik/radon">Radon</a></li>
<li><a href="https://github.com/rohaquinlop/complexipy">complexipy</a></li>
<li><a href="https://www.sciencedirect.com/science/article/abs/pii/S0164121222002370">A study testing how effective Cognitive Complexity is</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="edits-to-this-post">Edits to this Post <a hidden class="anchor" aria-hidden="true" href="#edits-to-this-post">#</a></h2>
<ul>
<li>05 Jan 2026: Added <em>&ldquo;I do not want it to format a section of code&rdquo;</em> entry to <a href="#tips">Tips</a> section.</li>
<li>05 Jan 2026: Added banner image and updated some formatting.</li>
<li>12 Jan 2026: MD Linting and AI Spelling, Grammar checks.</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://jbeattie5768.github.io/tags/python/">Python</a></li>
      <li><a href="https://jbeattie5768.github.io/tags/tools/">Tools</a></li>
      <li><a href="https://jbeattie5768.github.io/tags/ruff/">Ruff</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://jbeattie5768.github.io/posts/2025-07-27-modernizing-python-development-my-switch-to-uv/">
    <span class="title">« Prev</span>
    <br>
    <span>Modernizing Python Development: My Switch to UV</span>
  </a>
  <a class="next" href="https://jbeattie5768.github.io/posts/2025-07-12-test-post/">
    <span class="title">Next »</span>
    <br>
    <span>Test Post</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://jbeattie5768.github.io/">Jonathan B</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>


</body>

</html>
